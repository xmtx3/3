<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>å°å…­çˆ»ææŒ‡ç¥é€šæœ¯</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/lunar-javascript/lunar.js"></script>
    <style>
        body { 
            background-color: #fcfcfc; 
            color: #333;
            font-family: -apple-system, BlinkMacSystemFont, "PingFang SC", "Helvetica Neue", sans-serif;
            display: flex;
            justify-content: center;
            padding: 15px;
        }

        .app-card {
            background: #ffffff;
            border-radius: 16px;
            width: 100%;
            max-width: 450px;
            padding: 24px 20px;
            box-shadow: 0 2px 15px rgba(0,0,0,0.03);
            border: 1px solid #f0f0f0;
        }

        .title-text {
            font-size: 22px;
            font-weight: 700;
            color: #1a1e27;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .form-label {
            font-size: 12px;
            color: #999;
            margin-bottom: 6px;
            display: block;
        }
        .custom-input {
            width: 100%;
            height: 44px;
            background: #ffffff;
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            padding: 0 10px;
            font-size: 14px;
            color: #333;
            outline: none;
            appearance: none;
        }

        .btn-start {
            background: #2e3546;
            color: white;
            width: 100%;
            height: 50px;
            border-radius: 10px;
            font-weight: 600;
            font-size: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            margin: 20px 0;
            border: none;
            cursor: pointer;
            transition: opacity 0.2s;
        }
        .btn-start:active { opacity: 0.9; }

        .result-panel {
            background: #f8fafd;
            border-radius: 12px;
            padding: 20px 16px;
            border: 1px solid #ebf0f5;
        }
        
        .status-badge {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            margin: 8px auto;
        }
        .status-badge.bad { background: #fdf2f2; color: #e05e5e; border: 1px solid #fee2e2; }
        .status-badge.good { background: #f0fdf4; color: #22c55e; border: 1px solid #dcfce7; }

        .step-row {
            background: white;
            border: 1px solid #f0f0f0;
            border-radius: 8px;
            padding: 10px 12px;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            font-size: 13px;
            color: #444;
        }
        .step-num {
            width: 18px;
            height: 18px;
            background: #3c4455;
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            margin-right: 10px;
            flex-shrink: 0;
        }
    </style>
</head>
<body>

    <div class="app-card">
        <div class="text-center mb-6">
            <div class="title-text">
                <span>âœ¨</span> å°å…­çˆ»ææŒ‡ç¥é€šæœ¯
            </div>
            <div class="mt-3 flex flex-col items-center text-[12px] text-gray-400 gap-1">
                <div id="lunarInfo" class="flex items-center gap-1">ğŸ“… ä»Šæ—¥å†œå†ï¼š--</div>
                <div id="currentTime" class="flex items-center gap-1">ğŸ•’ å½“å‰æ—¶è¾°ï¼š--</div>
            </div>
        </div>

        <div class="grid grid-cols-3 gap-3 mb-4">
            <div>
                <label class="form-label">å¹´ä»½</label>
                <input type="number" id="year" class="custom-input" value="2026">
            </div>
            <div>
                <label class="form-label">å†œå†æœˆä»½</label>
                <select id="month" class="custom-input"></select>
            </div>
            <div>
                <label class="form-label">å†œå†æ—¥æœŸ</label>
                <select id="day" class="custom-input"></select>
            </div>
        </div>

        <div class="mb-2">
            <label class="form-label">æ—¶è¾°</label>
            <select id="hour" class="custom-input"></select>
        </div>

        <button onclick="startDivination()" class="btn-start">
            <span>âœ¨</span> å¼€å§‹å åœ
        </button>

        <div id="resultArea" class="hidden">
            <div class="result-panel">
                <div class="text-center">
                    <div class="text-xl font-bold text-gray-800" id="finalResultName">--</div>
                    <div id="statusBadge" class="status-badge">å‡¶</div>
                </div>
                
                <div class="text-[13px] font-bold text-gray-400 mt-4 mb-3 flex items-center gap-2">
                    <span class="text-sm">ğŸ”„</span> è®¡ç®—è¿‡ç¨‹
                </div>

                <div id="stepContainer"></div>

                <div class="mt-5 pt-4 border-t border-gray-100">
                    <div class="text-[13px] font-bold text-gray-400 mb-2 flex items-center gap-2">
                        <span class="text-sm">ğŸ’¡</span> è§£è¯»
                    </div>
                    <p id="interpretation" class="text-[13px] text-gray-600 leading-relaxed tracking-wide"></p>
                </div>
            </div>
        </div>

        <p class="mt-10 text-[10px] text-gray-300 text-center tracking-[0.1em]">
            Â© 2026 ç‰ˆæƒæ‰€æœ‰ dy : å°èŒ—åŒå­¦
        </p>
    </div>

    <script>
        const gods = ["å¤§å®‰", "ç•™è¿", "é€Ÿå–œ", "èµ¤å£", "å°å‰", "ç©ºäº¡"];
        const godStatus = { "å¤§å®‰":"å‰", "ç•™è¿":"å‡¶", "é€Ÿå–œ":"å‰", "èµ¤å£":"å‡¶", "å°å‰":"å‰", "ç©ºäº¡":"å‡¶" };
        const shichenNames = ["å­æ—¶ (23:00-01:00)", "ä¸‘æ—¶ (01:00-03:00)", "å¯…æ—¶ (03:00-05:00)", "å¯æ—¶ (05:00-07:00)", "è¾°æ—¶ (07:00-09:00)", "å·³æ—¶ (09:00-11:00)", "åˆæ—¶ (11:00-13:00)", "æœªæ—¶ (13:00-15:00)", "ç”³æ—¶ (15:00-17:00)", "é…‰æ—¶ (17:00-19:00)", "æˆŒæ—¶ (19:00-21:00)", "äº¥æ—¶ (21:00-23:00)"];
        const chineseNums = ["", "åˆä¸€", "åˆäºŒ", "åˆä¸‰", "åˆå››", "åˆäº”", "åˆå…­", "åˆä¸ƒ", "åˆå…«", "åˆä¹", "åˆå", "åä¸€", "åäºŒ", "åä¸‰", "åå››", "åäº”", "åå…­", "åä¸ƒ", "åå…«", "åä¹", "äºŒå", "å»¿ä¸€", "å»¿äºŒ", "å»¿ä¸‰", "å»¿å››", "å»¿äº”", "å»¿å…­", "å»¿ä¸ƒ", "å»¿å…«", "å»¿ä¹", "ä¸‰å"];
        
        const infoMap = {
            "å¤§å®‰": { text: "å¤§å®‰äº‹äº‹æ˜Œï¼Œæ±‚è°‹åœ¨ä¸œæ–¹ã€‚å¤±ç‰©å»ä¸è¿œï¼Œå®…èˆä¿å®‰åº·ã€‚è¡Œäººèº«æœªåŠ¨ï¼Œç—…è€…ä¸»æ— å¦¨ã€‚" },
            "ç•™è¿": { text: "ç•™è¿äº‹éš¾æˆï¼Œæ±‚è°‹æ—¥æœªæ˜ã€‚å®˜äº‹åªå®œç¼“ï¼Œå»è€…æœªå›ç¨‹ã€‚å¤±ç‰©å—æ–¹è§ï¼Œæ€¥è®¨æ–¹å¿ƒç§°ã€‚" },
            "é€Ÿå–œ": { text: "é€Ÿå–œå–œä¸´é—¨ï¼Œæ±‚è´¢å‘å—è¡Œã€‚å¤±ç‰©åˆæœªé—´ï¼Œé€¢äººè·¯ä¸Šå¯»ã€‚å®˜äº‹æœ‰è´µäººï¼Œå¤«äººæŠ¥å–œä¿¡ã€‚" },
            "èµ¤å£": { text: "èµ¤å£ä¸»å£èˆŒï¼Œå®˜éåˆ‡å®œé˜²ã€‚å¤±ç‰©æ€¥å»å¯»ï¼Œè¡Œäººæœ‰æƒŠæ…Œã€‚é¸¡çŠ¬å¤šä½œæ€ªï¼Œæ›´é¡»é˜²è¯…å’’ã€‚" },
            "å°å‰": { text: "å°å‰æœ€å‰æ˜Œï¼Œè·¯ä¸Šå¥½å•†é‡ã€‚é˜´äººæ¥æŠ¥å–œï¼Œå¤±ç‰©åœ¨å¤æ–¹ã€‚è¡Œäººç«‹ä¾¿è‡³ï¼Œäº¤å…³çœŸæ˜¯å¼ºã€‚" },
            "ç©ºäº¡": { text: "ç©ºäº¡äº‹ä¸ç¥¥ï¼Œé˜´äººå¤šä¹–å¼ ã€‚æ±‚è´¢æ— åˆ©ç›Šï¼Œè¡Œäººæœ‰ç¾æ®ƒã€‚å¤±ç‰©å¯»ä¸è§ï¼Œç—…äººé€¢æš—é¬¼ã€‚" }
        };

        function init() {
            const date = new Date();
            const lunar = Lunar.fromDate(date);
            document.getElementById('lunarInfo').innerText = `ä»Šæ—¥å†œå†ï¼š${lunar.getYearInGanZhi()}å¹´ ${lunar.getMonthInChinese()}æœˆ${lunar.getDayInChinese()}`;
            
            const hour = date.getHours();
            const hIdx = Math.floor((hour + 1) % 24 / 2);
            document.getElementById('currentTime').innerText = `å½“å‰æ—¶è¾°ï¼š${shichenNames[hIdx].split(' ')[0]}`;

            const mSelect = document.getElementById('month');
            const dSelect = document.getElementById('day');
            const hSelect = document.getElementById('hour');
            
            mSelect.innerHTML = ""; dSelect.innerHTML = ""; hSelect.innerHTML = "";
            for(let i=1; i<=12; i++) mSelect.options.add(new Option(i, i));
            for(let i=1; i<=30; i++) dSelect.options.add(new Option(chineseNums[i], i));
            shichenNames.forEach((s, i) => hSelect.options.add(new Option(s, i + 1)));

            mSelect.value = lunar.getMonth();
            dSelect.value = lunar.getDay();
            hSelect.value = hIdx + 1;
        }

        function startDivination() {
            const m = parseInt(document.getElementById('month').value);
            const d = parseInt(document.getElementById('day').value);
            const h = parseInt(document.getElementById('hour').value);

            // æ ¸å¿ƒç®—æ³•ï¼šå°å…­çˆ»æ¨ç®— (åŸºäº 6 ä¸ºå‘¨æœŸçš„å¾ªç¯)
            // 1. æœˆï¼šå¤§å®‰èµ·æ­£æœˆï¼Œé¡ºæ•°æœˆæ•°
            let mIdx = (m - 1) % 6;
            // 2. æ—¥ï¼šæœˆä¸Šèµ·åˆä¸€ï¼Œé¡ºæ•°æ—¥æ•°
            let dIdx = (mIdx + d - 1) % 6;
            // 3. æ—¶ï¼šæ—¥ä¸Šèµ·å­æ—¶ï¼Œé¡ºæ•°æ—¶æ•°
            let hIdx = (dIdx + h - 1) % 6;
            
            let hResult = gods[hIdx];

            document.getElementById('resultArea').classList.remove('hidden');
            document.getElementById('finalResultName').innerText = hResult;
            document.getElementById('interpretation').innerText = infoMap[hResult].text;
            
            const badge = document.getElementById('statusBadge');
            badge.innerText = godStatus[hResult];
            badge.className = `status-badge ${godStatus[hResult] === 'å‰' ? 'good' : 'bad'}`;

            const steps = [
                { num: 1, text: `æœˆä»½(${m})ï¼šä»å¤§å®‰å¼€å§‹æ•°${m}æ¬¡ â” ${gods[mIdx]}` },
                { num: 2, text: `æ—¥æœŸ(${chineseNums[d]})ï¼šä»${gods[mIdx]}å¼€å§‹æ•°${d}æ¬¡ â” ${gods[dIdx]}` },
                { num: 3, text: `æ—¶è¾°(${shichenNames[h-1].split(' ')[0]})ï¼šä»${gods[dIdx]}å¼€å§‹æ•°${h}æ¬¡ â” ${hResult}` }
            ];

            document.getElementById('stepContainer').innerHTML = steps.map(s => `
                <div class="step-row">
                    <div class="step-num">${s.num}</div>
                    <div>${s.text}</div>
                </div>
            `).join('');

            setTimeout(() => {
                window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' });
            }, 100);
        }

        window.onload = init;
    </script>
</body>
</html>
